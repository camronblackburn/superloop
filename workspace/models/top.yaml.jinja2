# This file will be converted into a YAML file by Jinja2 templating.
{{add_to_path(cwd())}}
{{add_to_path(cwd() ~ '/include')}}

# ==============================================================================
# GLOBAL VARIABLES FOR TIMELOOP AND ACCELERGY
# ==============================================================================
globals:
  version: 0.4
  environment_variables:
    # Gets rid of stats for zero-energy components such as networks/buffers that are not
    # used in the current architecture
    TIMELOOP_HIDE_INCONSEQUENTIAL_STATS: 1
    TIMELOOP_OUTPUT_STAT_SCIENTIFIC: 1
  expression_custom_functions: []
  accelergy_plug_ins:
  - {{cwd() ~ '/../superloop_plug_in/*.py'}}

# ==============================================================================
# PROBLEM SPECIFICATION
# ==============================================================================
# Set the problem file
{% set problem = cwd() ~ '/workloads/' ~ workload ~ '/' ~ layer %}
problem: {{include(problem, 'problem')}}

# ==============================================================================
# TOP-LEVEL VARIABLES
# ==============================================================================
variables: # May get overridden by the architecture specification.
  - version: 0.4
    technology: "SET ME"
    global_cycle_seconds: 1e-9
  - {{include(cwd() ~ '/architectures/' ~ architecture ~ '/variables.yaml', 'variables')}}
  

# ==============================================================================
# ARCHITECTURE SPECIFICATION
# ==============================================================================
architecture: {{include(cwd() ~ '/architectures/' ~ architecture ~ '/' ~ sub_architecture  ~ '.yaml', 'architecture')}}

# ==============================================================================
# COMPOUND COMPONENT SPECIFICATION
# ==============================================================================
components:
  version: 0.4
  classes: {{include_all('components/*.yaml', 'compound_components.classes')}}

# ==============================================================================
# MAPPER SPECIFICATION
# ==============================================================================
mapper: {{include(cwd() ~ '/include/mapper.yaml', 'mapper')}}


